{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e8e86a2f3fb4947a2ecb","webpack:///./threenodes/Core.coffee","webpack:///./threenodes/utils/Indexer.coffee","webpack:///./threenodes/nodes/collections/Nodes.coffee","webpack:///external \"_\"","webpack:///external \"Backbone\"","webpack:///./threenodes/connections/collections/Connections.coffee","webpack:///./threenodes/connections/models/Connection.coffee","webpack:///./threenodes/nodes/models/Node.coffee","webpack:///./threenodes/utils/Utils.coffee","webpack:///./threenodes/groups/collections/Groups.coffee","webpack:///./threenodes/groups/models/Group.coffee"],"names":[],"mappings":"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","file":"ThreeNodes.Core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"), require(\"Backbone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\", \"Backbone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Core\"] = factory(require(\"_\"), require(\"Backbone\"));\n\telse\n\t\troot[\"ThreeNodes\"] = root[\"ThreeNodes\"] || {}, root[\"ThreeNodes\"][\"Core\"] = factory(root[\"_\"], root[\"Backbone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e8e86a2f3fb4947a2ecb","Indexer = require './utils/Indexer'\n\nNodes = require './nodes/collections/Nodes'\nNode = require './nodes/models/Node'\n\nConnections = require './connections/collections/Connections'\nConnection = require './connections/models/Connection'\n\nGroups = require './groups/collections/Groups'\nGroup = require './groups/models/Group'\n\n\n#require 'jquery'\n\n#### App\nclass Core\n  @fields: {models:{}, views: {}}\n  @nodes: {models:{}, views: {}}\n  @groups: {models: {}, views: {}}\n\n  constructor: (options) ->\n    # Default settings\n    settings =\n      test: false\n      player_mode: false\n      direction: true\n    @settings = $.extend({}, settings, options)\n\n    # Initialize some core classes\n    # @group_definitions = new GroupDefinitions([])\n    indexer = new Indexer()\n    @groups = new Groups([], {indexer: indexer})\n    @nodes = new Nodes([], {settings: @settings, indexer:indexer})\n    @connections = new Connections()\n\n    # Create a group node when selected nodes are grouped\n    # @group_definitions.bind(\"definition:created\", @nodes.createGroup)\n\n    # When a group definition is removed delete all goup nodes using this definition\n    # @group_definitions.bind(\"remove\", @nodes.removeGroupsByDefinition)\n\n  @addFieldType: (fieldName, field) ->\n    Core.fields.models[fieldName] = field\n    return true\n\n  @addFieldView: (fieldName, fieldView) ->\n    Core.fields.views[fieldName] = fieldView\n    return true\n\n  @addNodeType: (nodeName, nodeType) ->\n    Core.nodes.models[nodeName] = nodeType\n    return true\n\n  @addNodeView: (viewName, nodeView) ->\n    Core.nodes.views[viewName] = nodeView\n    return true\n\n  getGroupByNode: (id) ->\n    for group in @db.groups\n      if(group.nodes.includes(id))\n        return group\n    return\n\n  getNodeById: (id) ->\n    for node in @db.nodes\n      if(node.id == id)\n        return node\n    return\n\n  setNodes: (json_object) ->\n    @nodes.removeAll()\n    @db = json_object\n\n    # nodes\n    self = @\n\n    @db.nodes.map (obj) ->\n      if !self.getGroupByNode(obj.id, self.db.groups)\n        node = new Node(obj)\n        self.nodes.push(node)\n\n\n    # group\n    @db.groups.map (obj) ->\n      groupObj = {\n        id: obj.id,\n        x: obj.x,\n        y: obj.y\n        width: obj.width,\n        height: obj.height,\n        nodes: []\n      }\n\n      obj.nodes.map (nodeId) ->\n        node = self.nodes.getNodeById(nodeId)\n        groupObj.nodes.push(node)        \n      \n      group = new Group(groupObj)\n      self.groups.push(group)\n\n      \n    return;\n\n    # connections\n    @db.connections.map (c)->\n      fromNodeId = c.from\n      fromNodeObj = self.getNodeById(fromNodeId)\n      fromNode = new Node(fromNodeObj)\n      fromGroupObj = self.getGroupByNode(fromNodeId, self.db.groups)\n      if fromGroupObj\n        fromGroup = new Group(fromGroupObj)\n\n      toNodeId = c.to\n      toNodeObj = self.getNodeById(toNodeId)\n      toNode = new Node(toNodeObj)\n      toGroupObj = self.getGroupByNode(toNodeId, self.db.groups)\n      if toGroupObj\n        toGroup = new Group(toGroupObj)\n\n      obj = {\n        id: c.id,\n        fromType: c.fromType,\n        toType: c.toType\n      }\n      \n      if fromGroup && toGroup && fromGroup.id == toGroup.id\n        # do nothing\n      else\n        obj.from = fromGroup || fromNode\n        obj.to = toGroup || toNode\n        connection = new Connection(obj)\n        self.connections.push(connection)\n\n\n\n\n\n\n\n    \n\n\n\n\n\n    # First recreate the group definitions\n    # if json_object.groups\n    #   for grp_def in json_object.groups\n    #     @group_definitions.create(grp_def)\n\n    # Create the nodes\n    # for node in json_object.nodes\n    #   if node.type != \"Group\"\n    #     # Create a simple node\n    #     @nodes.createNode(node)\n    #   else\n        # If the node is a group we first need to get the previously created group definition\n        # def = @group_definitions.getByGid(node.definition_id)\n        # if def\n        #   node.definition = def\n        #   grp = @nodes.createGroup(node)\n        # else\n        #   console.log \"can't find the GroupDefinition: #{node.definition_id}\"\n\n    # Create the connections\n    # for connection in json_object.connections\n    #   @nodes.createConnectionFromObject(connection)\n\n    # @nodes.indexer.uid = json_object.uid\n    # delay = (ms, func) -> setTimeout func, ms\n    # delay 1, => @nodes.renderAllConnections()\n\nmodule.exports = Core\n\n\n\n// WEBPACK FOOTER //\n// ./threenodes/Core.coffee","# Frida todo: why cannot be singleton?\n\n_instance = null\n\nclass Indexer\n  constructor: () ->\n    @uid = 0\n\n  getUID: () ->\n    return @uid += 1\n    \n  reset: () ->\n    @uid = 0\n\n\nIndexer.getInstance = () ->\n  if (!_instance)\n    _instance = new Indexer();\n  return _instance;\n\nmodule.exports = Indexer\n\n\n// WEBPACK FOOTER //\n// ./threenodes/utils/Indexer.coffee","_ = require 'Underscore'\nBackbone = require 'Backbone'\nIndexer = require 'threenodes/utils/Indexer'\nConnections = require 'threenodes/connections/collections/Connections'\n\nclass Nodes extends Backbone.Collection\n\n  initialize: (models, options) =>\n    self = this\n    # save material nodes in an array so they can be quickly rebuild\n\n    # Each node collections has it's own indexer, used to get unique id\n    @indexer = new Indexer()\n    @connections = new Connections([], {indexer: @indexer})\n\n    # Parent node, used for groups\n    # @parent = options.parent\n\n    # @bind \"createConnection\", (from_node, from_type, to_node, to_type) =>\n    #   @connections.create\n    #     from_node: from_node\n    #     from_type: from_type\n    #     to_node: to_node\n    #     to_type: to_type\n\n    # @bind \"renderConnections\", (node) =>\n    #   @connections.renderConnections(node)\n\n    # @bind \"removeConnection\", (node) =>\n    #   @connections.map (c) ->\n    #     if c.from_node == node || c.to_node == node\n    #       self.removeConnection(c)\n\n  clearWorkspace: () =>\n    @removeConnections()\n    @removeAll()\n    $(\"#webgl-window canvas\").remove()\n    @materials = []\n    @indexer.reset()\n    return this\n\n  destroy: () =>\n    @removeConnections()\n    @removeAll()\n    delete @materials\n    delete @indexer\n    delete @connections\n\n  # bindTimelineEvents: (timeline) =>\n  #   if @timeline\n  #     @timeline.off(\"tfieldsRebuild\", @showNodesAnimation)\n  #     @timeline.off(\"startSound\", @startSound)\n  #     @timeline.off(\"stopSound\", @stopSound)\n\n  #   @timeline = timeline\n  #   @timeline.on(\"tfieldsRebuild\", @showNodesAnimation)\n  #   @timeline.on(\"startSound\", @startSound)\n  #   @timeline.on(\"stopSound\", @stopSound)\n\n  find: (node_name) =>\n    return this.where({name: node_name})\n\n  createNode: (options) =>\n    # If not is a string instead of an object then take the option as the node type\n    if $.type(options) == \"string\"\n      options = {type: options}\n\n    # Save references of the application settings and timeline in the node model\n    options.timeline = @timeline\n    options.settings = @settings\n\n    # Save a reference of the nodes indexer\n    options.indexer = @indexer\n\n    options.parent = @parent\n\n    # Print error if the node type is not found and return false\n    if !ThreeNodes.Core.nodes.models[options.type]\n      console.error(\"Node type doesn't exists: \" + options.type)\n      return false\n\n    # Create the node and pass the options\n    n = new ThreeNodes.Core.nodes.models[options.type](options)\n\n    # Add the node to the collection\n    @add(n)\n    n\n\n  render: () =>\n    return;\n    # Define temporary objects to index the nodes\n    invalidNodes = {}\n    terminalNodes = {}\n\n    # Flatten the array of nodes.\n    # Nodes from groups will appear in the invalidNodes and/or terminalNodes too\n    # Get all root nodes and nodes requiring an update\n    buildNodeArrays = (nodes) ->\n      for node in nodes\n        if node.hasOutConnection() == false || node.auto_evaluate || node.delays_output\n          terminalNodes[node.attributes[\"id\"] + \"/\" + node.attributes[\"gid\"]] = node\n        invalidNodes[node.attributes[\"id\"] + \"/\" + node.attributes[\"gid\"]] = node\n        if node.nodes\n          buildNodeArrays(node.nodes.models)\n    buildNodeArrays(@models)\n\n    # Update a node and his parents\n    evaluateSubGraph = (node) ->\n      upstreamNodes = node.getUpstreamNodes()\n      for upnode in upstreamNodes\n        if invalidNodes[upnode.attributes[\"id\"] + \"/\" + upnode.attributes[\"gid\"]] && !upnode.delays_output\n          evaluateSubGraph(upnode)\n      if node.dirty || node.auto_evaluate\n        node.compute()\n        node.dirty = false\n        node.fields.setFieldInputUnchanged()\n\n      delete invalidNodes[node.attributes[\"id\"] + \"/\" + node.attributes[\"gid\"]]\n      true\n\n    # Process all root nodes which require an update\n    for id of terminalNodes\n      if invalidNodes[id]\n        evaluateSubGraph(terminalNodes[id])\n    true\n\n  # createConnectionFromObject: (connection) =>\n  #   # Get variables from their id\n  #   from_gid = if connection.from_node_gid then connection.from_node_gid.toString() else \"-1\"\n  #   from_node = @getNodeByNid(connection.from_node.toString(), from_gid)\n  #   from = connection.from\n  #   to_gid = if connection.to_node_gid then connection.to_node_gid.toString() else \"-1\"\n  #   to_node = @getNodeByNid(connection.to_node.toString(), to_gid)\n  #   to = connection.to\n\n  #   # If a field is missing try to switch from/to\n  #   if !from || !to\n  #     tmp = from_node\n  #     from_node = to_node\n  #     to_node = tmp\n  #     from = from_node.fields.outputs[connection.to.toString()]\n  #     to = to_node.fields.inputs[connection.from.toString()]\n\n  #   c = @connections.create\n  #       from_node: from_node\n  #       to_node: to_node\n  #       from_type: connection.from\n  #       to_type: connection.to\n  #       id: connection.id\n\n  #   c\n\n  # createGroup: (model, external_objects = []) =>\n  #   # create the group node\n  #   grp = @createNode(model)\n\n  #   # Recreate the external connections\n  #   for connection in external_objects\n  #     from = @getNodeByNid(connection.from_node)\n  #     to = @getNodeByNid(connection.to_node)\n\n  #     debugger;\n  #     c = @connections.create\n  #       from_node: from\n  #       from_type: connection.from\n  #       to_node: to\n  #       to_type: connection.to\n\n  #   return grp\n\n  removeGroupsByDefinition: (def) =>\n    _nodes = @models.concat()\n    _.each _nodes, (node) -> if node.definition && node.definition.gid == def.gid then node.remove()\n\n  renderAllConnections: () =>\n    @connections.render()\n\n  removeConnection: (c) ->\n    @connections.remove(c)\n\n\n  getNodeById: (id) ->\n    return @models.find (n)->\n      n.get('id') == id\n\n  # getNodeByNid: (id, gid = \"-1\") =>\n  #   for node in @models\n  #     if node.get(\"id\").toString() == id.toString()\n  #       if gid == \"-1\" || node.get(\"gid\").toString() == gid.toString()\n  #         return node\n  #     # special case for group\n  #     if node.nodes\n  #       res = node.nodes.getNodeByNid(id, gid)\n  #       if res then return res\n\n  #   return false\n\n  showNodesAnimation: () =>\n    @invoke \"showNodeAnimation\"\n\n  startSound: (time) =>\n    @each (node) -> if node.playSound instanceof Function then node.playSound(time)\n\n  stopSound: () =>\n    @each (node) -> if node.stopSound instanceof Function then node.stopSound()\n\n  removeSelectedNodes: () ->\n    for node in $(\".node.ui-selected\")\n      $(node).data(\"object\").remove()\n\n  removeAll: () ->\n    $(\"#tab-attribute\").html(\"\")\n    models = @models.concat()\n    _.invoke models, \"remove\"\n    @reset([])\n    true\n\n  removeConnections: () ->\n    @connections.removeAll()\n\nmodule.exports = Nodes\n\n\n\n// WEBPACK FOOTER //\n// ./threenodes/nodes/collections/Nodes.coffee","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 3\n// module chunks = 0 1 2 3","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Backbone\"\n// module id = 4\n// module chunks = 0 1 2 3","Backbone = require 'Backbone'\nConnection = require 'threenodes/connections/models/Connection'\n\nclass Connections extends Backbone.Collection\n  model: Connection\n\n  initialize: (models, options) =>\n    @bind \"connection:removed\", (c) => @remove(c)\n    super\n\n  render: () =>\n    @each (c) -> c.render()\n\n  renderConnections: (node) =>\n    @each (c) ->\n      if(c.options.to_node == node or c.options.from_node == node)\n        c.render()\n\n  # create: (model, options) =>\n  #   if !options then options = {}\n  #   model.indexer = @indexer\n  #   model = @_prepareModel(model, options)\n  #   if !model\n  #     return false\n  #   @add(model, options)\n  #   return model\n\n  removeAll: () =>\n    @remove(@models)\n\nmodule.exports = Connections\n\n\n\n// WEBPACK FOOTER //\n// ./threenodes/connections/collections/Connections.coffee","Backbone = require 'Backbone'\nIndexer = require 'threenodes/utils/Indexer'\n\n# Node to Node; Group to Group; Node to Group\nclass Connection extends Backbone.Model\n  initialize: (obj) =>\n\n    \n    id = obj.id || Indexer.getInstance().getUID()\n    @set('id', id)\n    \n    # frida: what is the difference of this.** and this.set('', '')?\n    @from = obj.from;\n    @fromType = obj.fromType;\n    @to = obj.to;\n    @toType = obj.toType;\n\n  # remove: =>\n  #   # Delete variable reference for garbage collection\n  #   delete @from_node\n  #   delete @from_type\n  #   delete @to_node\n  #   delete @to_type\n  #   @trigger \"connection:removed\", this\n  #   @destroy()\n  #   false\n\n  render: () =>\n    @trigger(\"render\", this, this)\n\n  validate: () =>\n    return false\n\n  \n  # todo\n  # toJSON: () ->\n  #   res =\n  #     id: @get(\"id\")\n  #     from_node: @from_node.get(\"id\")\n  #     from: @from_type\n  #     to_node: @to_node.get(\"id\")\n  #     to: @to_type\n  #   res\n\nmodule.exports = Connection\n\n\n// WEBPACK FOOTER //\n// ./threenodes/connections/models/Connection.coffee","_ = require 'Underscore'\nBackbone = require 'Backbone'\nUtils = require 'threenodes/utils/Utils'\n\n\n\n\nclass Node extends Backbone.Model\n  defaults:\n    id: -1\n    x: 0\n    y: 0\n    width: 90\n    height: 26\n    name: \"\"\n\n  initialize: (obj) =>\n    super\n    \n    id = obj.id || Index.getInstance().getUID() #todo: Indexer\n    @set('id', id)\n    \n    name = obj.name || @typename()\n    @set('name', name)\n\n    @set('x', obj.x)\n    @set('y', obj.y)\n    @set('width', obj.width)\n    @set('height', obj.height)\n    return this\n\n  typename: => String(@constructor.name)\n\n  toJSON: () =>\n    res =\n      id: @get('id')\n      name: @get('name')\n      type: @typename()\n      x: @get('x')\n      y: @get('y')\n      width: @get('width')\n      height: @get('height')\n    res\n \nmodule.exports = Node\n\n\n// WEBPACK FOOTER //\n// ./threenodes/nodes/models/Node.coffee","class Utils\n  @flatArraysAreEquals: (arr1, arr2) ->\n    if arr1.length != arr2.length\n      return false\n\n    for k, i in arr1\n      if arr1[i] != arr2[i]\n        return false\n\n    true\n\nmodule.exports = Utils\n\n\n\n// WEBPACK FOOTER //\n// ./threenodes/utils/Utils.coffee","_ = require 'Underscore'\nBackbone = require 'Backbone'\nIndexer = require 'threenodes/utils/Indexer'\nGroup = require '../models/Group'\n\nclass Groups extends Backbone.Collection\n\n  initialize: (models, options) =>\n    @indexer = options.indexer\n\n  createGroup: () =>\n    nodes = @getSelectedNodes()\n    n = new Group({nodes: nodes}, {indexer: @indexer})\n    @add(n)\n\n\n  getSelectedNodes: () ->\n    selected_nodes = []\n    $selected = $(\".node.ui-selected\").not(\".node .node\")\n    $selected.each () ->\n      node = $(this).data(\"object\")\n      selected_nodes.push(node)\n    return selected_nodes\n\nmodule.exports = Groups\n\n\n\n// WEBPACK FOOTER //\n// ./threenodes/groups/collections/Groups.coffee","_ = require 'Underscore'\nBackbone = require 'Backbone'\n\n\n# id\n# nodes\n# name\n\nclass Group extends Backbone.Model\n    defaults:\n        id: -1\n        width: 90\n        height: 26\n        x: 0\n        y: 0\n        name: \"\"\n\n    initialize: (obj) =>\n        super\n        @set('name', obj.name || @typename())\n        @set('id', obj.id || Indexer.getInstance().getUID())\n        @set('x', obj.x)\n        @set('y', obj.y)\n    \n    typename: => String(@constructor.name)\n\n    getNodesAveragePosition: () ->\n        min_x = 0\n        min_y = 0\n        max_x = 0\n        max_y = 0\n        for node in this.get('nodes')\n            min_x = Math.min(min_x, node.get(\"x\"))\n            max_x = Math.max(max_x, node.get(\"x\"))\n            min_y = Math.min(min_y, node.get(\"y\"))\n            max_y = Math.max(max_y, node.get(\"y\"))\n\n        dx = (min_x + max_x) / 2\n        dy = (min_y + max_y) / 2\n        return {x: dx, y: dy}\n\nmodule.exports = Group\n\n\n\n// WEBPACK FOOTER //\n// ./threenodes/groups/models/Group.coffee"],"sourceRoot":""}